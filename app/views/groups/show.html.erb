<div class="container flex flex-wrap h-64 overflow-y-scroll">
    <div class="comments w-1/3">
      <h1 class="font-bold text-2xl"><%= @group.group_name %></h1>
      <p>合計: <%= @group.foods.sum { |hash| hash[:calorie]} %>kcal</p>
      <% if @group.comments.present? %>
        <i class="fa fa-commenting"></i><%= @group.comments.count %>
      <% else %>
        <i class="fa fa-comment"></i><%= @group.comments.count %>
      <% end %>
    </div>
  </div>
<div class="grid grid-cols-3 flex flex-row-reverse gap-4">
  <%= render partial: "foods/food", collection: @foods %>
</div>
<div class="comment-form mt-8">
  <h3 class="text-lg font-bold mb-4">コメント投稿</h3>
  <div class="form-group mb-4">
    <%= form_with model: @comment, url: [@group, @comment], local: true do |f| %>
      <%= f.text_area :body, class: 'w-full py-2 px-4 border border-gray-400 rounded-lg', id: 'js-new-comment-body', row: 4, placeholder: "コメントを入力してください" %>
      <%= f.submit "コメント投稿", class: 'btn btn-primary' %>
    <% end %>
  </div>
<div>
<div class="comments mt-8">
  <h3 class="text-lg font-bold mb-4">コメント一覧</h3>
  <ul class="comment-list">
    <% @comments.each do |comment| %>
    <li class="comment mb-4">
      <div class="comment-meta flex justify-between mb-1">
          <div class="comment-author font-bold">
          <%= comment.user.name %>
          </div>
        <span class="comment-date text-gray-400"><%= l comment.created_at %></span>
      </div>
      <div class="comment-text bg-gray-100 p-4 rounded-lg">
        <%= comment.body %>
        <div class="flex justify-end">
          <% if current_user.own?(comment) %>
            <%= link_to comment_path(comment), method: :delete, class: "black hover:text-purple-700" do %>
              <i class="fa-solid fa-trash-can"></i>
            <% end %>
          <% end %>
        </div>
      </div>
    </li>
    <% end %>
  </ul>
</div>

<%= paginate @foods %>
<%= link_to '戻る', groups_path, class: "btn btn-primary" %>


